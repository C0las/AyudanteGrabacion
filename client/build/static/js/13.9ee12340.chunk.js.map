{"version":3,"sources":["redux/selectors/filter.js","components/views/assistente/Select.js","components/views/assistente/Report.js"],"names":["assistantSelect","state","assistant","filterAssistants","createSelector","allAssistants","assistants","currentFilter","data","filter","name","toLowerCase","includes","selectDay","dataDay","daysAvailable","map","avai","day","e","lastName","rut","filterSchedulerSelector","allScheduler","scheduler","auth","current","role","assistantsFilt","_id","title","departament","school","teacher","startDate","endDate","confirmationTurn","a","user","filterAssistantSchedulerSelector","filterAssistantsDaySelector","currentDay","format","Date","locale","es","replace","c","toUpperCase","filterAssistantSelector","filterAssistantDaysLengthSelector","length","Select","useSelector","dispatch","useDispatch","useEffect","fetchSchedulers","value","withRouter","props","history","useHistory","id","useParams","console","log","fetchSelectedAssistant","asyncFetch","then","useState","motivo","observacion","clase","addstudents","report","setReport","handleChange","target","addReport","axios","post","res","swal","text","icon","button","timer","push","className","onSubmit","preventDefault","handleSubit","disabled","onChange","defaultValue","type","placeholder"],"mappings":"mGAAA,2OAIMA,EAAkB,SAACC,GAAD,OAAWA,EAAMC,WAiB5BC,GAf2BC,aACtC,SAACH,GAAD,OAAWA,EAAMI,cAAcC,cAC/B,SAACL,GAAD,OAAWA,EAAMI,cAAcE,iBAC/B,SAACD,EAAYC,GACX,IAAIC,EAAOF,EAAWG,QAAO,SAACP,GAC5B,cAAOA,QAAP,IAAOA,OAAP,EAAOA,EAAWQ,KAAKC,cAAcC,SAASL,EAAcI,kBAM9D,MAFkB,KAAlBJ,EAAuCD,EAA8BE,KAMzCJ,aAC9B,SAACH,GAAD,OAAWA,EAAMI,cAAcC,cAC/B,SAACL,GAAD,OAAWA,EAAMI,cAAcQ,aAC/B,SAACZ,GAAD,OAAWA,EAAMI,cAAcE,iBAC/B,SAACD,EAAYO,EAAWN,GACtB,IAAIO,EAAUR,EAAWG,QAAO,SAACP,GAC/B,OAAOA,EAAUa,cACdC,KAAI,SAACC,GAAD,uBAAUA,EAAKC,IAAI,UAAnB,aAAU,EAAaP,iBAC3BC,SAASC,EAAUF,kBAGpBH,EAAOF,EAAWG,QACpB,SAACU,GAAD,OACEA,EAAET,KAAKC,cAAcC,SAASL,EAAcI,gBAC5CQ,EAAEC,SAAST,cAAcC,SAASL,EAAcI,gBAChDQ,EAAEE,IAAIV,cAAcC,SAASL,EAAcI,kBAY/C,MARc,UAAdE,GAA2C,KAAlBN,EACLD,EACF,UAAdO,EACgBL,EACF,UAAdK,EACgBC,EACAR,MAMXgB,EAA0BlB,aACrC,SAACH,GAAD,uBAAWA,EAAMsB,oBAAjB,aAAW,EAAoBC,aAC/B,SAACvB,GAAD,uBAAWA,EAAMI,qBAAjB,aAAW,EAAqBC,cAChC,SAACL,GAAD,uBAAWA,EAAMsB,oBAAjB,aAAW,EAAoBhB,iBAC/B,SAACN,GAAD,uBAAWA,EAAMwB,KAAKC,eAAtB,aAAW,EAAoBC,KAAK,GAAGjB,QACvC,SAACc,EAAWlB,EAAYC,EAAekB,GACrC,IAAIG,EAAiBJ,EAAUR,KAAI,SAACR,GAclC,MAbc,CACZqB,IAAKrB,EAAKqB,IACVC,MAAOtB,EAAKsB,MACZC,YAAavB,EAAKuB,YAClBC,OAAQxB,EAAKwB,OACbC,QAASzB,EAAKyB,QACdC,UAAW1B,EAAK0B,UAChBC,QAAS3B,EAAK2B,QACdC,iBAAkB5B,EAAK4B,iBACvBlC,UAAWI,EAAWG,QAAO,SAAC4B,GAAD,OAAOA,EAAER,IAAIjB,SAASJ,EAAKN,cAAY,GACpEoC,KAAMb,MAMNjB,EAAOoB,EAAenB,QAAO,SAACe,GAChC,OACEA,EAAUM,MAAMnB,cAAcC,SAASL,EAAcI,gBACrDa,EAAUtB,UAAUQ,KACjBC,cACAC,SAASL,EAAcI,gBAC1Ba,EAAUtB,UAAUmB,IACjBV,cACAC,SAASL,EAAcI,kBAS9B,MAJkB,KAAlBJ,EACoBqB,EACApB,KAMX+B,EAAmCnC,aAC9C,SAACH,GAAD,OAAWA,EAAMsB,aAAaC,aAC9B,SAACvB,GAAD,OAAWA,EAAMwB,KAAKC,WACtB,SAACF,EAAWE,GAIV,OAHWF,EAAUf,QAAO,SAACe,GAC3B,OAAOA,EAAUtB,UAAUU,SAASc,EAAQxB,iBAMrCsC,EAA8B,SAAChB,GAAD,OACzCpB,aACE,SAACH,GAAD,OAAWA,EAAMI,cAAcoC,cAC/B,SAACA,GAWC,OAVWjB,EAAUf,QAAO,SAACe,GAK3B,OAJgBkB,YAAO,IAAIC,KAAKnB,EAAUU,WAAY,aAAc,CAClEU,OAAQC,MAIPC,QAAQ,OAAO,SAACC,GAAD,OAAOA,EAAEC,iBACxBpC,SAAS6B,UAOPQ,EAA0B7C,YACrC,CAACJ,IACD,SAACE,GAAD,OAAeA,EAAUA,aAGdgD,EAAoC9C,YAC/C,CAACJ,IACD,SAACE,GAAD,uBAAeA,EAAUA,UAAUa,qBAAnC,aAAe,EAAmCoC,W,gKC9HrC,SAASC,IACtB,IAAM5C,EAAO6C,YAAYd,KACnBe,EAAWC,cAMjB,OAJAC,qBAAU,WACRF,EAASG,OACR,CAACH,IAEG9C,EAAKQ,KAAI,SAACG,GACf,IAAMe,EAAYQ,YAAO,IAAIC,KAAKxB,EAAEe,WAAY,SAC1CC,EAAUO,YAAO,IAAIC,KAAKxB,EAAEgB,SAAU,SAE5C,OACE,yBAAoBuB,MAAOvC,EAAEU,IAA7B,UACGV,EAAEW,MADL,IACaI,EADb,MAC2BC,IADdhB,EAAEU,Q,qCCwIN8B,uBAhJA,SAACC,GACd,IAAIC,EAAUC,cACR5D,EAAYmD,aAAY,SAACpD,GAAD,uBAAWA,EAAMC,iBAAjB,aAAW,EAAiBA,aAClD6D,EAAOC,cAAPD,GACFT,EAAWC,cAET7C,EAAmBR,EAAnBQ,KAAMU,EAAalB,EAAbkB,SAEd6C,QAAQC,IAAIH,GAEZP,qBAAU,WAAM,4CACd,sBAAAnB,EAAA,sDACEiB,EAASa,YAAuBJ,IADlC,4CADc,uBAAC,WAAD,gCAKdK,GAAaC,MAAK,iBACjB,CAACf,EAAUS,IAEd,MAA4BO,mBAAS,CACnC5D,KAAMA,EAAO,IAAMU,EACnBmD,OAAQ,GACRC,YAAa,GACbC,MAAO,GACPC,YAAa,KALf,mBAAOC,EAAP,KAAeC,EAAf,KAaMC,EAAe,SAAC1D,GACpByD,EAAU,2BACLD,GADI,kBAENxD,EAAE2D,OAAOpE,KAAOS,EAAE2D,OAAOpB,UAYxBqB,EAAY,WAChBC,IACGC,KAAK,iDAAkDN,GACvDN,MAAK,SAACa,GACLjB,QAAQC,IAAIgB,MAZhBC,IAAK,CACHrD,MAAO,UACPsD,KAAM,gCACNC,KAAM,UACNC,OAAQ,UACRC,MAAO,SAUT1B,EAAQ2B,KAAK,MAGf,OACE,sBAAKC,UAAU,oBAAf,UACE,oBAAIA,UAAU,2DAAd,qBAGA,uBACEC,SAAU,SAACvE,GAAD,OApCI,SAACA,GACnBA,EAAEwE,iBACFZ,IAkCqBa,CAAYzE,IAC7BsE,UAAU,oDAFZ,UAIE,sBAAKA,UAAU,sBAAf,UACE,uBAAOA,UAAU,uDAAjB,qBAGA,uBACE/E,KAAK,OACLmF,UAAQ,EACRnC,MAAOhD,EAAO,IAAMU,EACpBqE,UAAU,2FACVK,SAAU,SAAC3E,GAAD,OAAO0D,EAAa1D,SAGlC,sBAAKsE,UAAU,sBAAf,UACE,uBAAOA,UAAU,uDAAjB,oBAGA,yBACEA,UAAU,kFACV/E,KAAK,QACLoF,SAAU,SAAC3E,GAAD,OAAO0D,EAAa1D,IAHhC,eAME,uDACC,cAACiC,EAAD,UAGL,sBAAKqC,UAAU,sBAAf,UACE,uBAAOA,UAAU,uDAAjB,gCAIA,yBACEA,UAAU,kFACV/E,KAAK,SACLqF,aAAa,cACbD,SAAU,SAAC3E,GAAD,OAAO0D,EAAa1D,IAJhC,UAME,wDACA,yDACA,mEAGJ,sBAAKsE,UAAU,sBAAf,UACE,uBAAOA,UAAU,uDAAjB,8BAIA,uBACEO,KAAK,SACLC,YAAY,mBACZvF,KAAK,cACL+E,UAAU,0EACVK,SAAU,SAAC3E,GAAD,OAAO0D,EAAa1D,SAIlC,sBAAKsE,UAAU,oCAAf,UACE,uBAAOA,UAAU,uDAAjB,4BAGA,0BACEQ,YAAY,6BACZR,UAAU,yEACV/E,KAAK,cACLoF,SAAU,SAAC3E,GAAD,OAAO0D,EAAa1D,SAIlC,wBACE6E,KAAK,SACLP,UAAU,yHAFZ","file":"static/js/13.9ee12340.chunk.js","sourcesContent":["import { format } from 'date-fns'\r\nimport { es } from 'date-fns/locale'\r\nimport { createSelector } from 'reselect'\r\n\r\nconst assistantSelect = (state) => state.assistant\r\n\r\nexport const filterAssistantsSelector = createSelector(\r\n  (state) => state.allAssistants.assistants,\r\n  (state) => state.allAssistants.currentFilter,\r\n  (assistants, currentFilter) => {\r\n    let data = assistants.filter((assistant) => {\r\n      return assistant?.name.toLowerCase().includes(currentFilter.toLowerCase())\r\n    })\r\n\r\n    let assistantMap = {}\r\n    currentFilter === '' ? (assistantMap = assistants) : (assistantMap = data)\r\n\r\n    return assistantMap\r\n  }\r\n)\r\n\r\nexport const filterAssistants = createSelector(\r\n  (state) => state.allAssistants.assistants,\r\n  (state) => state.allAssistants.selectDay,\r\n  (state) => state.allAssistants.currentFilter,\r\n  (assistants, selectDay, currentFilter) => {\r\n    let dataDay = assistants.filter((assistant) => {\r\n      return assistant.daysAvailable\r\n        .map((avai) => avai.day[0]?.toLowerCase())\r\n        .includes(selectDay.toLowerCase())\r\n    })\r\n\r\n    let data = assistants.filter(\r\n      (e) =>\r\n        e.name.toLowerCase().includes(currentFilter.toLowerCase()) ||\r\n        e.lastName.toLowerCase().includes(currentFilter.toLowerCase()) ||\r\n        e.rut.toLowerCase().includes(currentFilter.toLowerCase())\r\n    )\r\n\r\n    let assistantMap = {}\r\n    selectDay === 'Todos' && currentFilter === ''\r\n      ? (assistantMap = assistants)\r\n      : selectDay === 'Todos'\r\n      ? (assistantMap = data)\r\n      : selectDay !== 'Todos'\r\n      ? (assistantMap = dataDay)\r\n      : (assistantMap = assistants)\r\n\r\n    return assistantMap\r\n  }\r\n)\r\n\r\nexport const filterSchedulerSelector = createSelector(\r\n  (state) => state.allScheduler?.scheduler,\r\n  (state) => state.allAssistants?.assistants,\r\n  (state) => state.allScheduler?.currentFilter,\r\n  (state) => state.auth.current?.role[0].name,\r\n  (scheduler, assistants, currentFilter, auth) => {\r\n    let assistantsFilt = scheduler.map((data) => {\r\n      const data1 = {\r\n        _id: data._id,\r\n        title: data.title,\r\n        departament: data.departament,\r\n        school: data.school,\r\n        teacher: data.teacher,\r\n        startDate: data.startDate,\r\n        endDate: data.endDate,\r\n        confirmationTurn: data.confirmationTurn,\r\n        assistant: assistants.filter((a) => a._id.includes(data.assistant))[0],\r\n        user: auth\r\n      }\r\n\r\n      return data1\r\n    })\r\n\r\n    let data = assistantsFilt.filter((scheduler) => {\r\n      return (\r\n        scheduler.title.toLowerCase().includes(currentFilter.toLowerCase()) ||\r\n        scheduler.assistant.name\r\n          .toLowerCase()\r\n          .includes(currentFilter.toLowerCase()) ||\r\n        scheduler.assistant.rut\r\n          .toLowerCase()\r\n          .includes(currentFilter.toLowerCase())\r\n      )\r\n    })\r\n\r\n    let schedulerMap = {}\r\n    currentFilter === ''\r\n      ? (schedulerMap = assistantsFilt)\r\n      : (schedulerMap = data)\r\n\r\n    return schedulerMap\r\n  }\r\n)\r\n\r\nexport const filterAssistantSchedulerSelector = createSelector(\r\n  (state) => state.allScheduler.scheduler,\r\n  (state) => state.auth.current,\r\n  (scheduler, current) => {\r\n    let data = scheduler.filter((scheduler) => {\r\n      return scheduler.assistant.includes(current.assistant)\r\n    })\r\n    return data\r\n  }\r\n)\r\n\r\nexport const filterAssistantsDaySelector = (scheduler) =>\r\n  createSelector(\r\n    (state) => state.allAssistants.currentDay,\r\n    (currentDay) => {\r\n      let data = scheduler.filter((scheduler) => {\r\n        let startDate = format(new Date(scheduler.startDate), 'EEEE dd/MM', {\r\n          locale: es\r\n        })\r\n\r\n        return startDate\r\n          .replace(/^\\w/, (c) => c.toUpperCase())\r\n          .includes(currentDay)\r\n      })\r\n\r\n      return data\r\n    }\r\n  )\r\n\r\nexport const filterAssistantSelector = createSelector(\r\n  [assistantSelect],\r\n  (assistant) => assistant.assistant\r\n)\r\n\r\nexport const filterAssistantDaysLengthSelector = createSelector(\r\n  [assistantSelect],\r\n  (assistant) => assistant.assistant.daysAvailable?.length\r\n)\r\n","import React, { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { fetchSchedulers } from \"../../../redux/actions/schedulerActions\";\r\nimport { format } from \"date-fns\";\r\nimport { filterAssistantSchedulerSelector } from \"../../../redux/selectors/filter\";\r\n\r\nexport default function Select() {\r\n  const data = useSelector(filterAssistantSchedulerSelector);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchSchedulers);\r\n  }, [dispatch]);\r\n\r\n  return data.map((e) => {\r\n    const startDate = format(new Date(e.startDate), \"HH:mm\");\r\n    const endDate = format(new Date(e.endDate), \"HH:mm\");\r\n\r\n    return (\r\n      <option key={e._id} value={e._id}>\r\n        {e.title} {startDate} - {endDate}\r\n      </option>\r\n    );\r\n  });\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\n\r\nimport axios from 'axios'\r\nimport Selector from './Select'\r\nimport swal from 'sweetalert'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useParams } from 'react-router-dom'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { fetchSelectedAssistant } from '../../../redux/actions/assistantActions'\r\n\r\nconst Report = (props) => {\r\n  let history = useHistory()\r\n  const assistant = useSelector((state) => state.assistant?.assistant)\r\n  const { id } = useParams()\r\n  const dispatch = useDispatch()\r\n\r\n  const { name, lastName } = assistant\r\n\r\n  console.log(id)\r\n\r\n  useEffect(() => {\r\n    async function asyncFetch() {\r\n      dispatch(fetchSelectedAssistant(id))\r\n    }\r\n\r\n    asyncFetch().then(() => {})\r\n  }, [dispatch, id])\r\n\r\n  const [report, setReport] = useState({\r\n    name: name + ' ' + lastName,\r\n    motivo: '',\r\n    observacion: '',\r\n    clase: '',\r\n    addstudents: ''\r\n  })\r\n\r\n  const handleSubit = (e) => {\r\n    e.preventDefault()\r\n    addReport()\r\n  }\r\n\r\n  const handleChange = (e) => {\r\n    setReport({\r\n      ...report,\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n  const mostrar = () => {\r\n    swal({\r\n      title: 'Reporte',\r\n      text: 'Datos Guardados correctamente',\r\n      icon: 'success',\r\n      button: 'Aceptar',\r\n      timer: '2000'\r\n    })\r\n  }\r\n  const addReport = () => {\r\n    axios\r\n      .post('https://api-ayudantes.herokuapp.com/api/report', report)\r\n      .then((res) => {\r\n        console.log(res)\r\n      })\r\n    mostrar()\r\n    history.push('/')\r\n  }\r\n\r\n  return (\r\n    <div className='container mx-auto'>\r\n      <h1 className='flex items-center justify-start text-2xl font-bold p-10 '>\r\n        Reporte\r\n      </h1>\r\n      <form\r\n        onSubmit={(e) => handleSubit(e)}\r\n        className='grid grid-cols-1 lg:grid-cols-2 gap-5 p-3 lg:p-20'\r\n      >\r\n        <div className='flex flex-col gap-3'>\r\n          <label className='uppercase tracking-wide text-black text-xs font-bold'>\r\n            Nombre:\r\n          </label>\r\n          <input\r\n            name='name'\r\n            disabled\r\n            value={name + ' ' + lastName}\r\n            className=' bg-gray-200 text-black text-xs border border-gray-200 rounded h-10 pl-3 truncate w-full'\r\n            onChange={(e) => handleChange(e)}\r\n          />\r\n        </div>\r\n        <div className='flex flex-col gap-3'>\r\n          <label className='uppercase tracking-wide text-black text-xs font-bold'>\r\n            CLASES\r\n          </label>\r\n          <select\r\n            className='bg-gray-200 border border-gray-200 text-black text-xs rounded h-10 pl-3 w-full '\r\n            name='clase'\r\n            onChange={(e) => handleChange(e)}\r\n          >\r\n            );\r\n            <option>Seleccionar Clase</option>\r\n            {<Selector />}\r\n          </select>\r\n        </div>\r\n        <div className='flex flex-col gap-3'>\r\n          <label className='uppercase tracking-wide text-black text-xs font-bold'>\r\n            Motivo del reporte\r\n          </label>\r\n\r\n          <select\r\n            className='bg-gray-200 border border-gray-200 text-black text-xs rounded h-10 pl-3 w-full '\r\n            name='motivo'\r\n            defaultValue='Seleccionar'\r\n            onChange={(e) => handleChange(e)}\r\n          >\r\n            <option>Seleccionar Motivo</option>\r\n            <option>REGISTRO DE ALUMNOS</option>\r\n            <option>SUSPENSIÓN DE CLASES</option>\r\n          </select>\r\n        </div>\r\n        <div className='flex flex-col gap-3'>\r\n          <label className='uppercase tracking-wide text-black text-xs font-bold'>\r\n            CANTIDAD ALUMNOS\r\n          </label>\r\n\r\n          <input\r\n            type='number'\r\n            placeholder='Ingresar alumnos'\r\n            name='addstudents'\r\n            className='bg-gray-200 text-black text-xs border border-gray-200 rounded h-10 pl-3'\r\n            onChange={(e) => handleChange(e)}\r\n          />\r\n        </div>\r\n\r\n        <div className='flex flex-col gap-3 lg:col-span-2'>\r\n          <label className='uppercase tracking-wide text-black text-xs font-bold'>\r\n            Observación\r\n          </label>\r\n          <textarea\r\n            placeholder='Ingresa una observación'\r\n            className='bg-gray-200 text-black text-xs border border-gray-200 rounded h-10 p-3'\r\n            name='observacion'\r\n            onChange={(e) => handleChange(e)}\r\n          />\r\n        </div>\r\n\r\n        <button\r\n          type='submit'\r\n          className='bg-gray-900 text-white border-b-4 hover:border-b-2 border-gray-500 hover:border-gray-100 lg:col-span-2 h-10 rounded-lg'\r\n        >\r\n          Generar Reporte\r\n        </button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(Report)\r\n"],"sourceRoot":""}