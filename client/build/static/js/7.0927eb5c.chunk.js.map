{"version":3,"sources":["redux/selectors/filter.js","components/common/AppointmentContent.js","components/admin/scheduler/Index.js"],"names":["assistantSelect","state","assistant","filterAssistants","createSelector","allAssistants","assistants","currentFilter","data","filter","name","toLowerCase","includes","selectDay","dataDay","daysAvailable","map","avai","day","e","lastName","rut","filterSchedulerSelector","allScheduler","scheduler","assistantsFilt","title","departament","school","teacher","startDate","endDate","confirmationTurn","a","_id","filterAssistantSchedulerSelector","auth","current","filterAssistantsDaySelector","currentDay","format","Date","locale","es","replace","c","toUpperCase","filterAssistantSelector","filterAssistantDaysLengthSelector","length","AppointmentContent","formatDate","restProps","className","hour","minute","indexName","indexOf","indexLastName","substr","SchedulerContainer","dispatch","useDispatch","useSelector","currentDate","DEPARTMENT","resources","fieldName","instances","id","text","color","firstDayOfWeek","height","onCurrentDateChange","setCurrentDate","defaultCurrentViewName","displayName","startDayHour","endDayHour","excludedDays","appointmentContentComponent","showCloseButton","shadePreviousCells","flexibleSpaceComponent","FlexibleSpace"],"mappings":"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","file":"static/js/7.0927eb5c.chunk.js","sourcesContent":["import { format } from 'date-fns'\r\nimport { es } from 'date-fns/locale'\r\nimport { createSelector } from 'reselect'\r\n\r\nconst assistantSelect = (state) => state.assistant\r\n\r\nexport const filterAssistantsSelector = createSelector(\r\n  (state) => state.allAssistants.assistants,\r\n  (state) => state.allAssistants.currentFilter,\r\n  (assistants, currentFilter) => {\r\n    let data = assistants.filter((assistant) => {\r\n      return assistant?.name.toLowerCase().includes(currentFilter.toLowerCase())\r\n    })\r\n\r\n    let assistantMap = {}\r\n    currentFilter === '' ? (assistantMap = assistants) : (assistantMap = data)\r\n\r\n    return assistantMap\r\n  }\r\n)\r\n\r\nexport const filterAssistants = createSelector(\r\n  (state) => state.allAssistants.assistants,\r\n  (state) => state.allAssistants.selectDay,\r\n  (state) => state.allAssistants.currentFilter,\r\n  (assistants, selectDay, currentFilter) => {\r\n    let dataDay = assistants.filter((assistant) => {\r\n      return assistant.daysAvailable\r\n        .map((avai) => avai.day[0]?.toLowerCase())\r\n        .includes(selectDay.toLowerCase())\r\n    })\r\n\r\n    let data = assistants.filter(\r\n      (e) =>\r\n        e.name.toLowerCase().includes(currentFilter.toLowerCase()) ||\r\n        e.lastName.toLowerCase().includes(currentFilter.toLowerCase()) ||\r\n        e.rut.toLowerCase().includes(currentFilter.toLowerCase())\r\n    )\r\n\r\n    let assistantMap = {}\r\n    selectDay === 'Todos' && currentFilter === ''\r\n      ? (assistantMap = assistants)\r\n      : selectDay === 'Todos'\r\n      ? (assistantMap = data)\r\n      : selectDay !== 'Todos'\r\n      ? (assistantMap = dataDay)\r\n      : (assistantMap = assistants)\r\n\r\n    return assistantMap\r\n  }\r\n)\r\n\r\nexport const filterSchedulerSelector = createSelector(\r\n  (state) => state.allScheduler.scheduler,\r\n  (state) => state.allAssistants.assistants,\r\n  (state) => state.allScheduler.currentFilter,\r\n  (scheduler, assistants, currentFilter) => {\r\n    let assistantsFilt = scheduler.map((data) => {\r\n      const data1 = {\r\n        title: data.title,\r\n        departament: data.departament,\r\n        school: data.school,\r\n        teacher: data.teacher,\r\n        startDate: data.startDate,\r\n        endDate: data.endDate,\r\n        confirmationTurn: data.confirmationTurn,\r\n        assistant: assistants.filter((a) => a._id.includes(data.assistant))[0]\r\n      }\r\n\r\n      return data1\r\n    })\r\n\r\n    let data = assistantsFilt.filter((scheduler) => {\r\n      return (\r\n        scheduler.title.toLowerCase().includes(currentFilter.toLowerCase()) ||\r\n        scheduler.assistant.name\r\n          .toLowerCase()\r\n          .includes(currentFilter.toLowerCase()) ||\r\n        scheduler.assistant.rut\r\n          .toLowerCase()\r\n          .includes(currentFilter.toLowerCase())\r\n      )\r\n    })\r\n\r\n    let schedulerMap = {}\r\n    currentFilter === ''\r\n      ? (schedulerMap = assistantsFilt)\r\n      : (schedulerMap = data)\r\n\r\n    return schedulerMap\r\n  }\r\n)\r\n\r\nexport const filterAssistantSchedulerSelector = createSelector(\r\n  (state) => state.allScheduler.scheduler,\r\n  (state) => state.auth.current,\r\n  (scheduler, current) => {\r\n    let data = scheduler.filter((scheduler) => {\r\n      return scheduler.assistant.includes(current.assistant)\r\n    })\r\n\r\n    return data\r\n  }\r\n)\r\n\r\nexport const filterAssistantsDaySelector = (scheduler) =>\r\n  createSelector(\r\n    (state) => state.allAssistants.currentDay,\r\n    (currentDay) => {\r\n      let data = scheduler.filter((scheduler) => {\r\n        let startDate = format(new Date(scheduler.startDate), 'EEEE dd/MM', {\r\n          locale: es\r\n        })\r\n\r\n        return startDate\r\n          .replace(/^\\w/, (c) => c.toUpperCase())\r\n          .includes(currentDay)\r\n      })\r\n\r\n      return data\r\n    }\r\n  )\r\n\r\nexport const filterAssistantSelector = createSelector(\r\n  [assistantSelect],\r\n  (assistant) => assistant.assistant\r\n)\r\n\r\nexport const filterAssistantDaysLengthSelector = createSelector(\r\n  [assistantSelect],\r\n  (assistant) => assistant.assistant.daysAvailable?.length\r\n)\r\n","import { LocationMarkerIcon, ClockIcon, UserIcon } from '@heroicons/react/solid'\r\n\r\nimport { Appointments } from '@devexpress/dx-react-scheduler-material-ui'\r\n\r\nconst AppointmentContent = ({ data, formatDate, ...restProps }) => {\r\n  const name = (assistant) => {\r\n    const indexName = data.assistant.name.indexOf(' ')\r\n    const indexLastName = data.assistant.lastName.indexOf(' ')\r\n\r\n    var name = data.assistant.name.substr(0, indexName)\r\n    var lastName = data.assistant.lastName.substr(0, indexLastName)\r\n\r\n    if (name === '') name = data.assistant.name\r\n    if (lastName === '') lastName = data.assistant.lastName\r\n\r\n    return name + ' ' + lastName\r\n  }\r\n\r\n  return (\r\n    <Appointments.AppointmentContent\r\n      {...restProps}\r\n      formatDate={formatDate}\r\n      data={data}\r\n    >\r\n      <div className='flex flex-col gap-3 w-full '>\r\n        <div className='flex flex-col'>\r\n          <div className='text-sm text-white font-bold'> {data.school}</div>\r\n          <div className='bg-white w-14 h-2 rounded-lg'></div>\r\n          <div className='text-white text-xs font-semibold mt-3'>\r\n            {data.departament}\r\n          </div>\r\n        </div>\r\n\r\n        <div className='flex flex-col gap-1'>\r\n          <div className='flex items-center gap-2'>\r\n            <ClockIcon className='w-4 h-4' />\r\n            <h1 className='text-xs'>\r\n              {formatDate(data.startDate, {\r\n                hour: 'numeric',\r\n                minute: 'numeric'\r\n              })}\r\n            </h1>\r\n            <span>-</span>\r\n            <h1 className='text-xs'>\r\n              {formatDate(data.endDate, {\r\n                hour: 'numeric',\r\n                minute: 'numeric'\r\n              })}\r\n            </h1>\r\n          </div>\r\n          <div className='flex text-white items-center gap-2'>\r\n            <LocationMarkerIcon className='w-4 h-4' />\r\n            <span className='text-xs'>{data.title}</span>\r\n          </div>\r\n\r\n          {data.assistant.name && (\r\n            <div className='flex flex-row text-white items-center gap-2'>\r\n              <UserIcon className='w-4 h-4' />\r\n              <span className='text-xs'>{name()}</span>\r\n            </div>\r\n          )}\r\n\r\n          {data.confirmationTurn === 'Pendiente' && (\r\n            <div className='flex items-center justify-center bg-yellow-400 rounded-lg w-20'>\r\n              Pendiente\r\n            </div>\r\n          )}\r\n\r\n          {data.confirmationTurn === 'Rechazado' && (\r\n            <div className='flex items-center justify-center bg-red-600 rounded-lg w-20'>\r\n              Rechazado\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </Appointments.AppointmentContent>\r\n  )\r\n}\r\n\r\nexport default AppointmentContent\r\n","import { useSelector, useDispatch } from 'react-redux'\r\nimport { ViewState } from '@devexpress/dx-react-scheduler'\r\nimport {\r\n  Scheduler,\r\n  WeekView,\r\n  Toolbar,\r\n  DateNavigator,\r\n  Appointments,\r\n  DayView,\r\n  ViewSwitcher,\r\n  Resources,\r\n  AppointmentForm,\r\n  AppointmentTooltip,\r\n  CurrentTimeIndicator\r\n} from '@devexpress/dx-react-scheduler-material-ui'\r\nimport AppointmentContent from '../../common/AppointmentContent'\r\nimport { setCurrentDate } from '../../../redux/actions/schedulerActions'\r\nimport { filterSchedulerSelector } from '../../../redux/selectors/filter'\r\n\r\nfunction SchedulerContainer() {\r\n  const dispatch = useDispatch()\r\n  let data = useSelector(filterSchedulerSelector)\r\n\r\n  let assistants = useSelector((state) => state.allAssistants.assistants)\r\n\r\n  /*let assistantsFilt = data.map((data) => {\r\n    const data1 = {\r\n      title: data.title,\r\n      departament: data.departament,\r\n      school: data.school,\r\n      teacher: data.teacher,\r\n      startDate: data.startDate,\r\n      endDate: data.endDate,\r\n      confirmationTurn: data.confirmationTurn,\r\n      assistant: assistants.filter((a) => a._id.includes(data.assistant))[0]\r\n    }\r\n\r\n    return data1\r\n  })*/\r\n\r\n  const currentDate = useSelector((state) => state.allScheduler.currentDate)\r\n  //const datee = useSelector(hourWork1)\r\n\r\n  /*const test = () => {\r\n    const hour = datee.map((e) => e.hour)\r\n    const minute = datee.map((e) => e.minute)\r\n\r\n    let horas = hour.reduce((a, b) => a + b, 0)\r\n    let minutos = minute.reduce((a, b) => a + b, 0)\r\n\r\n    if (minutos >= 60) {\r\n      // Divide minutes by 60 and add result to hours\r\n      horas += Math.floor(minutos / 60)\r\n      // Add remainder of totalM / 60 to minutes\r\n      minutos = minutos % 60\r\n    }\r\n\r\n    return horas + 'h' + minutos\r\n  }*/\r\n\r\n  const FlexibleSpace = ({ ...restProps }) => (\r\n    <Toolbar.FlexibleSpace\r\n      {...restProps}\r\n      className='flex flex-row items-center justify-center m-auto gap-2'\r\n    >\r\n      {/*<LocationSelector schools={schools} />*/}\r\n    </Toolbar.FlexibleSpace>\r\n  )\r\n\r\n  const DEPARTMENT = [\r\n    'Preparador Físico',\r\n    'Actuación',\r\n    'Sonido y Audiovisual',\r\n    'Redes y Telecomunicaciones'\r\n  ]\r\n\r\n  const resources = [\r\n    {\r\n      fieldName: 'departament',\r\n      title: 'Department',\r\n      instances: [\r\n        { id: DEPARTMENT[0], text: DEPARTMENT[0], color: '#36A5C4' },\r\n        { id: DEPARTMENT[1], text: DEPARTMENT[1], color: '#BF0249' },\r\n        { id: DEPARTMENT[2], text: DEPARTMENT[2], color: '#F78B30' },\r\n        { id: DEPARTMENT[3], text: DEPARTMENT[3], color: '#939393' }\r\n      ]\r\n    }\r\n  ]\r\n\r\n  return (\r\n    <Scheduler data={data} locale='es-Cl' firstDayOfWeek={1} height={540}>\r\n      <ViewState\r\n        currentDate={currentDate}\r\n        onCurrentDateChange={(currentDate) =>\r\n          dispatch(setCurrentDate(currentDate))\r\n        }\r\n        defaultCurrentViewName='Week'\r\n      />\r\n\r\n      <DayView\r\n        displayName='Dias'\r\n        startDayHour={8}\r\n        endDayHour={21}\r\n        excludedDays={[0, 6]}\r\n      />\r\n      <WeekView\r\n        displayName='Semanas'\r\n        startDayHour={8}\r\n        endDayHour={21}\r\n        excludedDays={[0, 6]}\r\n      />\r\n\r\n      <Appointments appointmentContentComponent={AppointmentContent} />\r\n      <AppointmentTooltip showCloseButton />\r\n      <AppointmentForm />\r\n      <CurrentTimeIndicator shadePreviousCells={false} />\r\n      <Resources data={resources} />\r\n      <Toolbar flexibleSpaceComponent={FlexibleSpace} />\r\n      <DateNavigator />\r\n      <ViewSwitcher />\r\n    </Scheduler>\r\n  )\r\n}\r\n\r\n/*\r\nconst mapStateToProps = (state) => {\r\n  // Recupera los elementos (Escuelas) a filtrar\r\n  let data = state.allScheduler.data.filter(\r\n    (dataItem) => state.allScheduler.schools.indexOf(dataItem.school) > -1\r\n  )\r\n  // Se captura la cadena del campo de entrada\r\n  const lowerCaseFilter = state.allScheduler.currentFilter.toLowerCase()\r\n  // Filtra los elementos del campo title y school\r\n  data = data.filter(\r\n    (dataItem) =>\r\n      dataItem.title.toLowerCase().includes(lowerCaseFilter) ||\r\n      dataItem.department.toLowerCase().includes(lowerCaseFilter)\r\n  )\r\n  return { ...state.allScheduler, data }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  onCurrentDateChange: (currentDate) =>\r\n    dispatch(createSchedulerAction('currentDate', currentDate)),\r\n  onCurrentViewNameChange: (currentViewName) =>\r\n    dispatch(createSchedulerAction('currentViewName', currentViewName)),\r\n  onSchoolsChange: (schools) =>\r\n    dispatch(createSchedulerAction('schools', schools))\r\n})\r\n\r\nconst ReduxLocationSelector = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(LocationSelector)\r\n*/\r\nexport default SchedulerContainer\r\n"],"sourceRoot":""}